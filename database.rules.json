
{
  "rules": {
    ".read": false,
    ".write": false,
    "users": {
      ".indexOn": "nickname",
      "$uid": {
        ".read": "auth != null && $uid === auth.uid",
        ".write": "auth != null && $uid === auth.uid"
      }
    },
    "admins": {
      ".write": "auth != null && root.child('users').child(auth.uid).child('isAdmin').val() === true"
    },
    "applications": {
      ".indexOn": "userId",
      "$appId": {
        ".write": "auth != null"
      }
    },
    "posts": {
      ".read": "auth != null",
      "$postId": {
        ".write": "auth != null && ((newData.exists() && !data.exists() && newData.child('userId').val() === auth.uid) || (data.exists() && data.child('userId').val() === auth.uid))"
      }
    },
    "prayers": {
      ".write": "auth != null"
    },
    "transport": {
      ".write": "auth != null"
    },
    "maps": {
       ".write": "auth != null"
    },
    "rules": {
       ".write": "auth != null"
    },
    "magic": {
        "teachings": {
            ".read": "auth != null"
        },
        ".write": "auth != null && (auth.uid === 'yawuIwXKVbNhsBQSqWfGZyAzZ3A3' || auth.uid === 'DH3G5YCIR5WsAljrQBEw3zK0jw12' || auth.uid === 'ZMzJOQ4X5QYajS9vIEiPgrwr5g72' || auth.uid === 'Bt3DidqzFkaAlyNuILctdRxNytH2')"
    },
    "races": {
        ".write": "auth != null"
    },
    "race_details": {
        ".write": "auth != null"
    },
    "library": {
       ".write": "auth != null"
    },
     "history": {
       ".write": "auth != null"
    },
    "aristocracy_titles": {
      ".write": "auth != null"
    },
     "feudal_territories": {
      ".write": "auth != null"
    },
     "celebrities": {
      ".write": "auth != null"
    },
    "flora_fauna": {
       ".write": "auth != null"
    },
    "newspapers": {
        ".write": "auth != null"
    },
    "world_status": {
       ".write": "auth != null && (root.child('users').child(auth.uid).child('isAdmin').val() === true || auth.uid === 'yawuIwXKVbNhsBQSqWfGZyAzZ3A3' || auth.uid === 'DH3G5YCIR5WsAljrQBEw3zK0jw12' || auth.uid === 'ZMzJOQ4X5QYajS9vIEiPgrwr5g72' || auth.uid === 'Bt3DidqzFkaAlyNuILctdRxNytH2')"
    },
    "spiritWorld": {
       ".write": "auth != null && (auth.uid === 'yawuIwXKVbNhsBQSqWfGZyAzZ3A3' || root.child('users').child(auth.uid).child('isAdmin').val() === true || auth.uid === 'DH3G5YCIR5WsAljrQBEw3zK0jw12' || auth.uid === 'ZMzJOQ4X5QYajS9vIEiPgrwr5g72' || auth.uid === 'Bt3DidqzFkaAlyNuILctdRxNytH2')"
    },
    "science": {
       ".write": "auth != null"
    },
    "professions": {
      ".write": "auth != null"
    },
    "guilds": {
        ".write": "auth != null"
    },
    "calendar": {
      ".read": "auth != null",
      ".write": "auth != null && root.child('users').child(auth.uid).child('isAdmin').val() === true"
    },
    "economy": {
        ".write": "auth != null"
    },
    "faq": {
        ".write": "auth != null"
    },
    "social_links": {
        ".write": "auth != null"
    },
    "locations": {
        ".write": "auth != null"
    },
    "news_links": {
        ".write": "auth != null"
    },
    "laws": {
      ".write": "auth != null"
    },
    "radio_status": {
        ".write": "auth != null && (auth.uid === 'yawuIwXKVbNhsBQSqWfGZyAzZ3A3' || auth.uid === 'DH3G5YCIR5WsAljrQBEw3zK0jw12' || auth.uid === 'ZMzJOQ4X5QYajS9vIEiPgrwr5g72' || auth.uid === 'Bt3DidqzFkaAlyNuILctdRxNytH2')"
    },
     "advertising": {
      ".write": "auth != null"
    },
    "stories": {
      ".write": "auth != null && (root.child('users').child(auth.uid).child('isAdmin').val() === true || auth.uid === 'yawuIwXKVbNhsBQSqWfGZyAzZ3A3' || auth.uid === 'DH3G5YCIR5WsAljrQBEw3zK0jw12' || auth.uid === 'ZMzJOQ4X5QYajS9vIEiPgrwr5g72' || auth.uid === 'Bt3DidqzFkaAlyNuILctdRxNytH2')",
      "$storyId": {
        "roles": {
          "$roleId": {
            "participants": {
              ".write": "auth != null",
              "$participantIndex": {
                // Allow users to remove themselves, or admin to remove anyone
                ".write": "(root.child('users').child(auth.uid).child('isAdmin').val() === true) || (data.exists() && data.child('participantId').val() === auth.uid && !newData.exists())"
              }
            },
            "status": {
              // Allow any authenticated user to change the role status (e.g. from 'taken' to 'open')
              ".write": "auth != null"
            }
          }
        }
      }
    },
    "storyApplications": {
      ".write": "auth != null"
    },
    "story_suggestions": {
      ".write": "auth != null"
    },
    "bulletin_board": {
      ".write": "auth != null",
      "$noteId": {
        ".write": "newData.exists() && !data.exists() && newData.child('authorId').val() === auth.uid || (data.exists() && data.child('authorId').val() === auth.uid) || root.child('users').child(auth.uid).child('isAdmin').val() === true"
      }
    }
  }
}
